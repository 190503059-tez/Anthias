{
  "version": 3,
  "file": "screenly-ose.js",
  "sourceRoot": "",
  "sources": [
    "screenly-ose.coffee"
  ],
  "names": [],
  "mappings": "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",
  "sourcesContent": [
    "### screenly-ose ui ###\n\n$().ready ->\n  $('#subsribe-form-container').popover content: get_template 'subscribe-form'\n\n\nAPI = (window.Screenly ||= {}) # exports\n\ndateSettings = {}\n\nif use24HourClock\n  dateSettings.time = \"HH:mm\"\n  dateSettings.fullTime = \"HH:mm:ss\"\n  dateSettings.showMeridian = false\nelse\n  dateSettings.time = \"hh:mm A\"\n  dateSettings.fullTime = \"hh:mm:ss A\"\n  dateSettings.showMeridian = true\n\ndateSettings.date = dateFormat.toUpperCase()\ndateSettings.datepickerFormat = dateFormat\n\ndateSettings.fullDate = \"#{dateSettings.date} #{dateSettings.fullTime}\"\n\n\nAPI.date_to = date_to = (d) ->\n  # Cross-browser UTC to localtime conversion\n  dd = moment.utc(d).local()\n  string: -> dd.format dateSettings.fullDate\n  date: -> dd.format dateSettings.date\n  time: -> dd.format dateSettings.time\n\nnow = -> new Date()\n\nget_template = (name) -> _.template ($ \"##{name}-template\").html()\ndelay = (wait, fn) -> _.delay fn, wait\n\nmimetypes = [ [('jpg jpeg png pnm gif bmp'.split ' '), 'image']\n              [('avi mkv mov mpg mpeg mp4 ts flv'.split ' '), 'video']]\nviduris   = ('rtsp rtmp'.split ' ')\ndomains = [ [('www.youtube.com youtu.be'.split ' '), 'youtube_asset']]\n\n\ngetMimetype = (filename) ->\n  scheme = (_.first filename.split ':').toLowerCase()\n  match = scheme in viduris\n  if match\n    return 'streaming'\n\n  domain = (_.first ((_.last filename.split '//').toLowerCase()).split '/')\n  mt = _.find domains, (mt) -> domain in mt[0]\n  if mt and domain in mt[0]\n    return mt[1]\n\n  ext = (_.last filename.split '.').toLowerCase()\n  mt = _.find mimetypes, (mt) -> ext in mt[0]\n  if mt\n    return mt[1]\n\ndurationSecondsToHumanReadable = (secs) ->\n  durationString = \"\"\n  secInt = parseInt(secs)\n\n  if ((hours = Math.floor(secInt / 3600)) > 0)\n    durationString += hours + \" hours \"\n  if ((minutes = Math.floor(secInt / 60) % 60) > 0)\n    durationString += minutes + \" min \"\n  if ((seconds = (secInt % 60)) > 0)\n    durationString += seconds + \" sec\"\n\n  return durationString\n\nurl_test = (v) -> /(http|https|rtsp|rtmp):\\/\\/[\\w-]+(\\.?[\\w-]+)+([\\w.,@?^=%&amp;:\\/~+#-]*[\\w@?^=%&amp;\\/~+#-])?/.test v\nget_filename = (v) -> (v.replace /[\\/\\\\\\s]+$/g, '').replace /^.*[\\\\\\/]/g, ''\ntruncate_str = (v) -> v.replace /(.{100})..+/, \"$1...\"\ninsertWbr = (v) -> (v.replace /\\//g, '/<wbr>').replace /\\&/g, '&amp;<wbr>'\n\n# Tell Backbone to send its saves as JSON-encoded.\nBackbone.emulateJSON = off\n\n# Models\nAPI.Asset = class Asset extends Backbone.Model\n  idAttribute: \"asset_id\"\n  fields: 'name mimetype uri start_date end_date duration skip_asset_check'.split ' '\n  defaults: ->\n    name: ''\n    mimetype: 'webpage'\n    uri: ''\n    is_active: 1\n    start_date: ''\n    end_date: ''\n    duration: defaultDuration\n    is_enabled: 0\n    is_processing: 0\n    nocache: 0\n    play_order: 0\n    skip_asset_check: 0\n  active: =>\n    if @get('is_enabled') and @get('start_date') and @get('end_date')\n      at = now()\n      start_date = new Date(@get('start_date'));\n      end_date = new Date(@get('end_date'));\n      return start_date <= at <= end_date\n    else\n      return false\n\n  backup: =>\n    @backup_attributes = @toJSON()\n\n  rollback: =>\n    if @backup_attributes\n      @set @backup_attributes\n      @backup_attributes = undefined\n  old_name: =>\n    if @backup_attributes\n      return @backup_attributes.name\n\n\nAPI.Assets = class Assets extends Backbone.Collection\n  url: \"/api/v1.2/assets\"\n  model: Asset\n  comparator: 'play_order'\n\n\n# Views\nAPI.View = {};\n\nAPI.View.AddAssetView = class AddAssetView extends Backbone.View\n  $f: (field) => @$ \"[name='#{field}']\" # get field element\n  $fv: (field, val...) => (@$f field).val val... # get or set filed value\n\n  initialize: (oprions) =>\n    ($ 'body').append @$el.html get_template 'asset-modal'\n    (@$el.children \":first\").modal()\n    (@$ '.cancel').val 'Back to Assets'\n\n    deadlines = start: now(), end: (moment().add 'days', 30).toDate()\n    for own tag, deadline of deadlines\n      d = date_to deadline\n      @.$fv \"#{tag}_date_date\", d.date()\n      @.$fv \"#{tag}_date_time\", d.time()\n\n    no\n\n  viewmodel:(model) =>\n    for which in ['start', 'end']\n      @$fv \"#{which}_date\", (moment (@$fv \"#{which}_date_date\") + \" \" + (@$fv \"#{which}_date_time\"), dateSettings.fullDate).toDate().toISOString()\n    for field in model.fields when not (@$f field).prop 'disabled'\n      model.set field, (@$fv field), silent:yes\n\n  events:\n    'change': 'change'\n    'click #save-asset': 'save'\n    'click .cancel': 'cancel'\n    'hidden.bs.modal': 'destroyFileUploadWidget'\n    'click .tabnav-uri': 'clickTabNavUri'\n    'click .tabnav-file_upload': 'clickTabNavUpload'\n    'change .is_enabled-skip_asset_check_checkbox': 'toggleSkipAssetCheck'\n\n  save: (e) =>\n    if ((@$fv 'uri') == '')\n      return no\n    if (@$ '#tab-uri').hasClass 'active'\n      model =  new Asset {}, {collection: API.assets}\n      @$fv 'mimetype', ''\n      @updateUriMimetype()\n      @viewmodel model\n      model.set {name: model.get 'uri'}, silent:yes\n      save = model.save()\n\n      (@$ 'input').prop 'disabled', on\n      save.done (data) =>\n        model.id = data.asset_id\n        (@$el.children \":first\").modal 'hide'\n        _.extend model.attributes, data\n        model.collection.add model\n      save.fail =>\n        (@$ 'input').prop 'disabled', off\n        model.destroy()\n    no\n\n  toggleSkipAssetCheck: (e) =>\n    @$fv 'skip_asset_check', if parseInt((@$fv 'skip_asset_check')) == 1 then 0 else 1\n\n  change_mimetype: =>\n    if (@$fv 'mimetype') == \"video\"\n      @$fv 'duration', 0\n    else if (@$fv 'mimetype') == \"streaming\"\n      @$fv 'duration', defaultStreamingDuration\n    else\n      @$fv 'duration', defaultDuration\n\n  clickTabNavUpload: (e) =>\n    if not (@$ '#tab-file_upload').hasClass 'active'\n      (@$ 'ul.nav-tabs li').removeClass 'active show'\n      (@$ '.tab-pane').removeClass 'active'\n      (@$ '.tabnav-file_upload').addClass 'active show'\n      (@$ '#tab-file_upload').addClass 'active'\n      (@$ '.uri').hide()\n      (@$ '.skip_asset_check_checkbox').hide()\n      (@$ '#save-asset').hide()\n      that = this\n      (@$ \"[name='file_upload']\").fileupload\n        autoUpload: false\n        sequentialUploads: true\n        maxChunkSize: 5000000 #5 MB\n        url: 'api/v1/file_asset'\n        progressall: (e, data) => if data.loaded and data.total\n          (@$ '.progress .bar').css 'width', \"#{data.loaded / data.total * 100}%\"\n        add: (e, data) ->\n          (that.$ '.status').hide()\n          (that.$ '.progress').show()\n\n          model =  new Asset {}, {collection: API.assets}\n          filename = data['files'][0]['name']\n          that.$fv 'name', filename\n          that.updateFileUploadMimetype(filename)\n          that.viewmodel model\n\n          data.submit()\n          .success (uri) ->\n            model.set {uri: uri}, silent:yes\n\n            save = model.save()\n            save.done (data) ->\n              model.id = data.asset_id\n              _.extend model.attributes, data\n              model.collection.add model\n            save.fail ->\n              model.destroy()\n          .error ->\n            model.destroy()\n        stop: (e) ->\n          (that.$ '.progress').hide()\n          (that.$ '.progress .bar').css 'width', \"0\"\n        done: (e, data) ->\n          (that.$ '.status').show()\n          (that.$ '.status').html 'Upload completed.'\n          setTimeout ->\n            (that.$ '.status').fadeOut('slow')\n          , 5000\n    no\n\n  clickTabNavUri: (e) => # TODO: clean\n    if not (@$ '#tab-uri').hasClass 'active'\n      (@$ \"[name='file_upload']\").fileupload 'destroy'\n      (@$ 'ul.nav-tabs li').removeClass 'active show'\n      (@$ '.tab-pane').removeClass 'active'\n      (@$ '.tabnav-uri').addClass 'active show'\n      (@$ '#tab-uri').addClass 'active'\n      (@$ '#save-asset').show()\n      (@$ '.uri').show()\n      (@$ '.skip_asset_check_checkbox').show()\n      (@$ '.status').hide()\n      (@$f 'uri').focus()\n\n  updateUriMimetype: => @updateMimetype @$fv 'uri'\n  updateFileUploadMimetype: (filename) => @updateMimetype filename\n  updateMimetype: (filename) =>\n    mt = getMimetype filename\n    @$fv 'mimetype', if mt then mt else new Asset().defaults()['mimetype']\n    @change_mimetype()\n\n  change: (e) =>\n    @_change  ||= _.throttle (=>\n      @validate()\n      yes), 500\n    @_change arguments...\n\n  validate: (e) =>\n    that = this\n    validators =\n      uri: (v) ->\n        if v\n          if ((that.$ '#tab-uri').hasClass 'active') and not url_test v\n            'please enter a valid URL'\n    errors = ([field, v] for field, fn of validators when v = fn (@$fv field))\n\n    (@$ \".form-group .help-inline.invalid-feedback\").remove()\n    (@$ \".form-group .form-control\").removeClass 'is-invalid'\n    (@$ '[type=submit]').prop 'disabled', no\n    for [field, v] in errors\n      (@$ '[type=submit]').prop 'disabled', yes\n      (@$ \".form-group.#{field} .form-control\").addClass 'is-invalid'\n      (@$ \".form-group.#{field} .controls\").append \\\n        $ (\"<span class='help-inline invalid-feedback'>#{v}</span>\")\n\n  cancel: (e) =>\n    (@$el.children \":first\").modal 'hide'\n\n  destroyFileUploadWidget: (e) =>\n    if (@$ '#tab-file_upload').hasClass 'active'\n      (@$ \"[name='file_upload']\").fileupload 'destroy'\n\n\nAPI.View.EditAssetView = class EditAssetView extends Backbone.View\n  $f: (field) => @$ \"[name='#{field}']\" # get field element\n  $fv: (field, val...) => (@$f field).val val... # get or set filed value\n\n  initialize: (options) =>\n    ($ 'body').append @$el.html get_template 'asset-modal'\n    (@$ 'input.time').timepicker\n      minuteStep: 5, showInputs: yes, disableFocus: yes, showMeridian: dateSettings.showMeridian\n\n    (@$ 'input[name=\"nocache\"]').prop 'checked', @model.get 'nocache'\n    (@$ '.modal-header .close').remove()\n    (@$el.children \":first\").modal()\n\n    @model.backup()\n\n    @model.bind 'change', @render\n\n    @render()\n    @validate()\n    no\n\n  render: () =>\n    @undelegateEvents()\n    (@$ f).attr 'disabled', on for f in 'mimetype uri file_upload'.split ' '\n    (@$ '#modalLabel').text \"Edit Asset\"\n    (@$ '.asset-location').hide(); (@$ '.uri').hide(); (@$ '.skip_asset_check_checkbox').hide()\n    (@$ '.asset-location.edit').show()\n    (@$ '.mime-select').prop('disabled', 'true')\n\n    if (@model.get 'mimetype') == 'video'\n      (@$f 'duration').prop 'disabled', on\n\n    for field in @model.fields\n      if (@$fv field) != @model.get field\n        @$fv field, @model.get field\n    (@$ '.uri-text').html insertWbr truncate_str (@model.get 'uri')\n\n    for which in ['start', 'end']\n      d = date_to @model.get \"#{which}_date\"\n      @$fv \"#{which}_date_date\", d.date()\n      (@$f \"#{which}_date_date\").datepicker autoclose: yes, format: dateSettings.datepickerFormat\n      (@$f \"#{which}_date_date\").datepicker 'setValue', d.date()\n      @$fv \"#{which}_date_time\", d.time()\n\n    @displayAdvanced()\n    @delegateEvents()\n    no\n\n  viewmodel: =>\n    for which in ['start', 'end']\n      @$fv \"#{which}_date\", (moment (@$fv \"#{which}_date_date\") + \" \" + (@$fv \"#{which}_date_time\"), dateSettings.fullDate).toDate().toISOString()\n    for field in @model.fields when not (@$f field).prop 'disabled'\n      @model.set field, (@$fv field), silent:yes\n\n  events:\n    'click #save-asset': 'save'\n    'click .cancel': 'cancel'\n    'change': 'change'\n    'keyup': 'change'\n    'click .advanced-toggle': 'toggleAdvanced'\n\n  changeLoopTimes: =>\n    current_date = new Date()\n    end_date = new Date()\n\n    switch @$('#loop_times').val()\n      when \"day\"\n        @setLoopDateTime (date_to current_date), (date_to end_date.setDate(current_date.getDate() + 1))\n      when \"week\"\n        @setLoopDateTime (date_to current_date), (date_to end_date.setDate(current_date.getDate() + 7))\n      when \"month\"\n        @setLoopDateTime (date_to current_date), (date_to end_date.setMonth(current_date.getMonth() + 1))\n      when \"year\"\n        @setLoopDateTime (date_to current_date), (date_to end_date.setFullYear(current_date.getFullYear() + 1))\n      when \"forever\"\n        @setLoopDateTime (date_to current_date), (date_to end_date.setFullYear(9999))\n      when \"manual\"\n        @setDisabledDatepicker(false)\n        (@$ \"#manul_date\").show()\n        return\n      else\n        return\n    @setDisabledDatepicker(true)\n    (@$ \"#manul_date\").hide()\n\n  save: (e) =>\n    @viewmodel()\n    save = null\n    @model.set 'nocache', if (@$ 'input[name=\"nocache\"]').prop 'checked' then 1 else 0\n\n    if not @model.get 'name'\n      if @model.old_name()\n        @model.set {name: @model.old_name()}, silent:yes\n      else if getMimetype @model.get 'uri'\n        @model.set {name: get_filename @model.get 'uri'}, silent:yes\n      else\n        @model.set {name: @model.get 'uri'}, silent:yes\n    save = @model.save()\n\n    (@$ 'input, select').prop 'disabled', on\n    save.done (data) =>\n      @model.id = data.asset_id\n      @collection.add @model if not @model.collection\n      (@$el.children \":first\").modal 'hide'\n      _.extend @model.attributes, data\n    save.fail =>\n      (@$ '.progress').hide()\n      (@$ 'input, select').prop 'disabled', off\n    no\n\n  change: (e) =>\n    @_change  ||= _.throttle (=>\n      @changeLoopTimes()\n      @viewmodel()\n      @model.trigger 'change'\n      @validate(e)\n      yes), 500\n    @_change arguments...\n\n  validate: (e) =>\n    that = this\n    validators =\n      duration: (v) =>\n        if ('video' isnt @model.get 'mimetype') and (not (_.isNumber v*1 ) or v*1 < 1)\n          'Please enter a valid number.'\n      end_date: (v) =>\n        unless (new Date @$fv 'start_date') < (new Date @$fv 'end_date')\n          if $(e?.target)?.attr(\"name\") == \"start_date_date\"\n            start_date = new Date @$fv 'start_date'\n            end_date = new Date(start_date.getTime() + Math.max(parseInt(@$fv 'duration'), 60) * 1000)\n            @setLoopDateTime (date_to start_date), (date_to end_date)\n            return\n\n          'End date should be after start date.'\n    errors = ([field, v] for field, fn of validators when v = fn (@$fv field))\n\n    (@$ \".form-group .help-inline.invalid-feedback\").remove()\n    (@$ \".form-group .form-control\").removeClass 'is-invalid'\n    (@$ '[type=submit]').prop 'disabled', no\n    for [field, v] in errors\n      (@$ '[type=submit]').prop 'disabled', yes\n      (@$ \".form-group.#{field} .form-control\").addClass 'is-invalid'\n      (@$ \".form-group.#{field} .controls\").append \\\n        $ (\"<span class='help-inline invalid-feedback'>#{v}</span>\")\n\n\n  cancel: (e) =>\n    @model.rollback()\n    (@$el.children \":first\").modal 'hide'\n\n  toggleAdvanced: =>\n    (@$ '.fa-play').toggleClass 'rotated'\n    (@$ '.fa-play').toggleClass 'unrotated'\n    (@$ '.collapse-advanced').collapse 'toggle'\n\n  displayAdvanced: =>\n    img = 'image' is @$fv 'mimetype'\n    edit = url_test @model.get 'uri'\n    has_nocache = img and edit\n    (@$ '.advanced-accordion').toggle has_nocache is on\n\n  setLoopDateTime: (start_date, end_date) =>\n    @$fv \"start_date_date\", start_date.date()\n    (@$f \"start_date_date\").datepicker autoclose: yes, format: dateSettings.datepickerFormat\n    (@$f \"start_date_date\").datepicker 'setDate', moment(start_date.date(), dateSettings.date).toDate()\n    @$fv \"start_date_time\", start_date.time()\n    @$fv \"end_date_date\", end_date.date()\n    (@$f \"end_date_date\").datepicker autoclose: yes, format: dateSettings.datepickerFormat\n    (@$f \"end_date_date\").datepicker 'setDate', moment(end_date.date(), dateSettings.date).toDate()\n    @$fv \"end_date_time\", end_date.time()\n\n    (@$ \".form-group .help-inline.invalid-feedback\").remove()\n    (@$ \".form-group .form-control\").removeClass 'is-invalid'\n    (@$ '[type=submit]').prop 'disabled', no\n\n  setDisabledDatepicker: (b) =>\n    for which in ['start', 'end']\n      (@$f \"#{which}_date_date\").attr  'disabled', b\n      (@$f \"#{which}_date_time\").attr  'disabled', b\n\nAPI.View.AssetRowView = class AssetRowView extends Backbone.View\n  tagName: \"tr\"\n\n  initialize: (options) =>\n    @template = get_template 'asset-row'\n\n  render: =>\n    @$el.html @template _.extend json = @model.toJSON(),\n      name: insertWbr truncate_str json.name # word break urls at slashes\n      duration: durationSecondsToHumanReadable(json.duration)\n      start_date: (date_to json.start_date).string()\n      end_date: (date_to json.end_date).string()\n    @$el.prop 'id', @model.get 'asset_id'\n    (@$ \".delete-asset-button\").popover content: get_template 'confirm-delete'\n    (@$ \".toggle input\").prop \"checked\", @model.get 'is_enabled'\n    (@$ \".asset-icon\").addClass switch @model.get \"mimetype\"\n      when \"video\"     then \"fas fa-video\"\n      when \"streaming\" then \"fas fa-video\"\n      when \"image\"     then \"far fa-image\"\n      when \"webpage\"   then \"fas fa-globe-americas\"\n      else \"\"\n\n    if (@model.get \"is_processing\") == 1\n      (@$ 'input, button').prop 'disabled', on\n      (@$ \".asset-toggle\").html get_template 'processing-message'\n\n    @el\n\n  events:\n    'change .is_enabled-toggle input': 'toggleIsEnabled'\n    'click .download-asset-button': 'download'\n    'click .edit-asset-button': 'edit'\n    'click .delete-asset-button': 'showPopover'\n\n  toggleIsEnabled: (e) =>\n    val = (1 + @model.get 'is_enabled') % 2\n    @model.set is_enabled: val\n    @setEnabled off\n    save = @model.save()\n    save.done => @setEnabled on\n    save.fail =>\n      @model.set @model.previousAttributes(), silent:yes # revert changes\n      @setEnabled on\n      @render()\n    yes\n\n  setEnabled: (enabled) => if enabled\n    @$el.removeClass 'warning'\n    @delegateEvents()\n    (@$ 'input, button').prop 'disabled', off\n  else\n    @hidePopover()\n    @undelegateEvents()\n    @$el.addClass 'warning'\n    (@$ 'input, button').prop 'disabled', on\n\n  download: (e) =>\n    r = $.get '/api/v1/assets/' + @model.id + '/content'\n      .success (result) ->\n        switch result['type']\n          when 'url'\n            window.open(result['url'])\n          when 'file'\n            content = base64js.toByteArray(result['content'])\n\n            mimetype = result['mimetype']\n            fn = result['filename']\n\n            blob = new Blob([content], {type: mimetype})\n            url = URL.createObjectURL(blob)\n\n            a = document.createElement('a')\n            document.body.appendChild(a)\n            a.download = fn\n            a.href = url\n            a.click()\n\n            URL.revokeObjectURL(url)\n            a.remove()\n    no\n\n  edit: (e) =>\n    new EditAssetView model: @model\n    no\n\n  delete: (e) =>\n    @hidePopover()\n    if (xhr = @model.destroy()) is not false\n      xhr.done => @remove()\n    else\n      @remove()\n    no\n\n  showPopover: =>\n    if not ($ '.popover').length\n      (@$ \".delete-asset-button\").popover 'show'\n      ($ '.confirm-delete').click @delete\n      ($ window).one 'click', @hidePopover\n    no\n\n  hidePopover: =>\n    (@$ \".delete-asset-button\").popover 'hide'\n    no\n\n\nAPI.View.AssetsView = class AssetsView extends Backbone.View\n  initialize: (options) =>\n    @collection.bind event, @render for event in ('reset add remove sync'.split ' ')\n    @sorted = (@$ '#active-assets').sortable\n      containment: 'parent'\n      axis: 'y'\n      helper: 'clone'\n      update: @update_order\n\n  update_order: =>\n    active = (@$ '#active-assets').sortable 'toArray'\n\n    @collection.get(id).set('play_order', i) for id, i in active\n    @collection.get(el.id).set('play_order', active.length) for el in (@$ '#inactive-assets tr').toArray()\n\n    $.post '/api/v1/assets/order', ids: ((@$ '#active-assets').sortable 'toArray').join ','\n\n  render: =>\n    @collection.sort()\n\n    (@$ \"##{which}-assets\").html '' for which in ['active', 'inactive']\n\n    @collection.each (model) =>\n      which = if model.active() then 'active' else 'inactive'\n      (@$ \"##{which}-assets\").append (new AssetRowView model: model).render()\n\n    for which in ['active', 'inactive']\n      if (@$ \"##{which}-assets tr\").length == 0\n        (@$ \"##{which}-assets-section .table-assets-help-text\").show()\n      else\n        (@$ \"##{which}-assets-section .table-assets-help-text\").hide()\n\n    for which in ['inactive', 'active']\n      @$(\".#{which}-table thead\").toggle !!(@$(\"##{which}-assets tr\").length)\n\n    @update_order()\n\n    @el\n\n\nAPI.App = class App extends Backbone.View\n  initialize: =>\n    ($ window).ajaxError (e,r) ->\n      ($ '#request-error').html (get_template 'request-error')()\n      if (j = $.parseJSON r.responseText) and (err = j.error)\n        ($ '#request-error .msg').text 'Server Error: ' + err\n      ($ '#request-error').show()\n      setTimeout ->\n        ($ '#request-error').fadeOut('slow')\n      , 5000\n    ($ window).ajaxSuccess (event, request, settings) ->\n      if (settings.url == new Assets().url) and (settings.type == 'POST')\n        ($ '#request-error').html (get_template 'request-success')()\n        ($ '#request-error .msg').text 'Asset has been successfully uploaded.'\n        ($ '#request-error').show()\n        setTimeout ->\n          ($ '#request-error').fadeOut('slow')\n        , 5000\n\n    (API.assets = new Assets()).fetch()\n    API.assetsView = new AssetsView\n      collection: API.assets\n      el: @$ '#assets'\n\n    for address in wsAddresses\n      try\n        ws = new WebSocket address\n        ws.onmessage = (x) ->\n          model = API.assets.get(x.data)\n          if model\n            save = model.fetch()\n      catch error\n        no\n\n  events:\n    'click .add-asset-button': 'add',\n    'click #previous-asset-button': 'previous',\n    'click #next-asset-button': 'next'\n\n  add: (e) ->\n    new AddAssetView\n    no\n\n  previous: (e) ->\n    $.get '/api/v1/assets/control/previous'\n\n  next: (e) ->\n    $.get '/api/v1/assets/control/next'\n"
  ]
}